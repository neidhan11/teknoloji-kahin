<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kar≈üƒ±la≈ütƒ±r | Teknoloji Kahin</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Kar≈üƒ±la≈ütƒ±rma sayfasƒ± √∂zel stiller */
        .compare-header {
            text-align: center;
            padding: 30px;
            background: var(--gradient-1);
            border-radius: 20px;
            margin-bottom: 30px;
        }

        .compare-header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .compare-selectors {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            margin-bottom: 30px;
        }

        .selector-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 25px;
        }

        .selector-card h3 {
            margin-bottom: 15px;
            color: var(--text-secondary);
        }

        .selector-card select {
            width: 100%;
            padding: 15px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            cursor: pointer;
        }

        .vs-badge {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-purple);
            text-align: center;
        }

        .compare-results {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .compare-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 25px;
        }

        .compare-card.winner {
            border-color: var(--accent-green);
            box-shadow: 0 0 20px rgba(63, 185, 80, 0.2);
        }

        .compare-card h2 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .compare-card h2 a {
            color: var(--accent-blue);
            text-decoration: none;
        }

        .winner-badge {
            background: var(--accent-green);
            color: #000;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .metric-row:last-child {
            border-bottom: none;
        }

        .metric-label {
            color: var(--text-secondary);
        }

        .metric-value {
            font-weight: 600;
        }

        .metric-value.positive {
            color: var(--accent-green);
        }

        .metric-value.negative {
            color: var(--accent-red);
        }

        .compare-chart {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .compare-chart h3 {
            margin-bottom: 20px;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: var(--accent-blue);
            text-decoration: none;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .verdict {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 30px;
            text-align: center;
        }

        .verdict h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .verdict-text {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        .verdict-winner {
            color: var(--accent-green);
            font-weight: 700;
        }

        @media (max-width: 768px) {
            .compare-selectors {
                grid-template-columns: 1fr;
            }

            .compare-results {
                grid-template-columns: 1fr;
            }

            .vs-badge {
                padding: 10px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Ana Sayfaya D√∂n</a>

        <div class="compare-header">
            <h1>üìä Teknoloji Kar≈üƒ±la≈ütƒ±r</h1>
            <p>ƒ∞ki teknolojiyi yan yana kar≈üƒ±la≈ütƒ±r</p>
        </div>

        <!-- Se√ßiciler -->
        <div class="compare-selectors">
            <div class="selector-card">
                <h3>1. Teknoloji</h3>
                <select id="tech1">
                    <option value="">Se√ßin...</option>
                </select>
            </div>

            <div class="vs-badge">VS</div>

            <div class="selector-card">
                <h3>2. Teknoloji</h3>
                <select id="tech2">
                    <option value="">Se√ßin...</option>
                </select>
            </div>
        </div>

        <!-- Sonu√ßlar -->
        <div class="compare-results" id="compareResults" style="display: none;">
            <div class="compare-card" id="card1">
                <h2><a href="#" id="link1" target="_blank"><span id="name1">-</span></a></h2>
                <div class="metric-row">
                    <span class="metric-label">‚≠ê Stars</span>
                    <span class="metric-value" id="stars1">-</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">üìà B√ºy√ºme</span>
                    <span class="metric-value" id="growth1">-</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">üéØ Trend Skoru</span>
                    <span class="metric-value" id="score1">-</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">üíª Dil</span>
                    <span class="metric-value" id="lang1">-</span>
                </div>
            </div>

            <div class="compare-card" id="card2">
                <h2><a href="#" id="link2" target="_blank"><span id="name2">-</span></a></h2>
                <div class="metric-row">
                    <span class="metric-label">‚≠ê Stars</span>
                    <span class="metric-value" id="stars2">-</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">üìà B√ºy√ºme</span>
                    <span class="metric-value" id="growth2">-</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">üéØ Trend Skoru</span>
                    <span class="metric-value" id="score2">-</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">üíª Dil</span>
                    <span class="metric-value" id="lang2">-</span>
                </div>
            </div>
        </div>

        <!-- Grafik -->
        <div class="compare-chart" id="chartSection" style="display: none;">
            <h3>üìä Kar≈üƒ±la≈ütƒ±rma Grafiƒüi</h3>
            <canvas id="compareChart"></canvas>
        </div>

        <!-- Sonu√ß -->
        <div class="verdict" id="verdict" style="display: none;">
            <h3>üèÜ Sonu√ß</h3>
            <p class="verdict-text" id="verdictText">-</p>
        </div>

        <footer class="footer">
            <p><a href="index.html">Ana Sayfa</a> | <a href="history.html">Tarihsel Veri</a></p>
        </footer>
    </div>

    <script>
        let allProjects = [];
        let compareChart = null;

        // Veri y√ºkle
        async function loadData() {
            try {
                const response = await fetch('./data/trending.json');
                const data = await response.json();
                allProjects = [...data.projects, ...data.watchList];
                populateSelects();
            } catch (error) {
                console.error('Veri y√ºklenemedi:', error);
            }
        }

        // Select'leri doldur
        function populateSelects() {
            const select1 = document.getElementById('tech1');
            const select2 = document.getElementById('tech2');

            allProjects.forEach(project => {
                const option1 = new Option(project.name, project.name);
                const option2 = new Option(project.name, project.name);
                select1.add(option1);
                select2.add(option2);
            });
        }

        // Kar≈üƒ±la≈ütƒ±rma yap
        function compare() {
            const tech1Name = document.getElementById('tech1').value;
            const tech2Name = document.getElementById('tech2').value;

            if (!tech1Name || !tech2Name) return;
            if (tech1Name === tech2Name) {
                alert('Farklƒ± teknolojiler se√ßin!');
                return;
            }

            const tech1 = allProjects.find(p => p.name === tech1Name);
            const tech2 = allProjects.find(p => p.name === tech2Name);

            if (!tech1 || !tech2) return;

            // Sonu√ßlarƒ± g√∂ster
            document.getElementById('compareResults').style.display = 'grid';
            document.getElementById('chartSection').style.display = 'block';
            document.getElementById('verdict').style.display = 'block';

            // Kart 1
            document.getElementById('name1').textContent = tech1.name;
            document.getElementById('link1').href = `https://github.com/${tech1.fullName}`;
            document.getElementById('stars1').textContent = formatNumber(tech1.stars);
            document.getElementById('growth1').textContent = (tech1.growth >= 0 ? '+' : '') + tech1.growth + '%';
            document.getElementById('growth1').className = 'metric-value ' + (tech1.growth >= 0 ? 'positive' : 'negative');
            document.getElementById('score1').textContent = tech1.score + '/100';
            document.getElementById('lang1').textContent = tech1.language;

            // Kart 2
            document.getElementById('name2').textContent = tech2.name;
            document.getElementById('link2').href = `https://github.com/${tech2.fullName}`;
            document.getElementById('stars2').textContent = formatNumber(tech2.stars);
            document.getElementById('growth2').textContent = (tech2.growth >= 0 ? '+' : '') + tech2.growth + '%';
            document.getElementById('growth2').className = 'metric-value ' + (tech2.growth >= 0 ? 'positive' : 'negative');
            document.getElementById('score2').textContent = tech2.score + '/100';
            document.getElementById('lang2').textContent = tech2.language;

            // Kazanan belirle
            const winner = tech1.score > tech2.score ? tech1 : tech2;
            const loser = tech1.score > tech2.score ? tech2 : tech1;

            document.getElementById('card1').classList.toggle('winner', tech1.score > tech2.score);
            document.getElementById('card2').classList.toggle('winner', tech2.score > tech1.score);

            // Sonu√ß metni
            document.getElementById('verdictText').innerHTML = `
                <span class="verdict-winner">${winner.name}</span> daha y√ºksek trend skoruna sahip 
                (${winner.score} vs ${loser.score}). 
                ${winner.growth > 0 ? `Ayrƒ±ca %${winner.growth} b√ºy√ºme g√∂steriyor!` : ''}
            `;

            // Grafik
            updateChart(tech1, tech2);
        }

        // Grafik g√ºncelle
        function updateChart(tech1, tech2) {
            const ctx = document.getElementById('compareChart').getContext('2d');

            if (compareChart) {
                compareChart.destroy();
            }

            compareChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Trend Skoru', 'Stars (normalize)', 'B√ºy√ºme', 'Pop√ºlerlik'],
                    datasets: [
                        {
                            label: tech1.name,
                            data: [
                                tech1.score,
                                Math.min(tech1.stars / 1000, 100),
                                Math.max(0, Math.min(tech1.growth / 10, 100)),
                                tech1.score * 0.8
                            ],
                            backgroundColor: 'rgba(102, 126, 234, 0.3)',
                            borderColor: 'rgba(102, 126, 234, 1)',
                            pointBackgroundColor: 'rgba(102, 126, 234, 1)'
                        },
                        {
                            label: tech2.name,
                            data: [
                                tech2.score,
                                Math.min(tech2.stars / 1000, 100),
                                Math.max(0, Math.min(tech2.growth / 10, 100)),
                                tech2.score * 0.8
                            ],
                            backgroundColor: 'rgba(163, 113, 247, 0.3)',
                            borderColor: 'rgba(163, 113, 247, 1)',
                            pointBackgroundColor: 'rgba(163, 113, 247, 1)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(48, 54, 61, 0.5)' },
                            grid: { color: 'rgba(48, 54, 61, 0.5)' },
                            pointLabels: { color: '#8b949e' },
                            ticks: { color: '#8b949e', backdropColor: 'transparent' }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: { color: '#8b949e' }
                        }
                    }
                }
            });
        }

        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num.toString();
        }

        // Event listeners
        document.getElementById('tech1').addEventListener('change', compare);
        document.getElementById('tech2').addEventListener('change', compare);

        // Ba≈ülat
        loadData();
    </script>
</body>

</html>